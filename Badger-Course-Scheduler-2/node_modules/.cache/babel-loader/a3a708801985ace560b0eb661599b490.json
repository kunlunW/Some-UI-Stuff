{"ast":null,"code":"var _jsxFileName = \"/Users/kunlunwang/Downloads/test/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport PreCourse from './PreCourse';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: [],\n      filteredCourses: [],\n      subjects: [],\n      cartCourses: {},\n      stop: false,\n      recommend: [],\n      modal: false,\n      requi: []\n    };\n  }\n\n  componentDidMount() {\n    this.loadInitialState();\n  }\n\n  async loadInitialState() {\n    let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    await this.setState({\n      stop: true\n    });\n    let courseData = await (await fetch(courseURL)).json();\n    await this.setState({\n      stop: false\n    });\n    this.setState({\n      allCourses: courseData,\n      filteredCourses: courseData,\n      subjects: this.getSubjects(courseData)\n    });\n  }\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for (let i = 0; i < data.length; i++) {\n      if (subjects.indexOf(data[i].subject) === -1) subjects.push(data[i].subject);\n    }\n\n    return subjects;\n  }\n\n  setCourses(courses) {\n    this.setState({\n      filteredCourses: courses\n    });\n  }\n\n  addCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses)); // I think this is a hack to deepcopy\n\n    let courseIndex = this.state.allCourses.findIndex(x => {\n      return x.number === data.course;\n    });\n\n    if (courseIndex === -1) {\n      return;\n    }\n\n    if ('subsection' in data) {\n      if (data.course in this.state.cartCourses) {\n        if (data.section in this.state.cartCourses[data.course]) {\n          newCartCourses[data.course][data.section].push(data.subsection);\n        } else {\n          newCartCourses[data.course][data.section] = [];\n          newCartCourses[data.course][data.section].push(data.subsection);\n        }\n      } else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n        newCartCourses[data.course][data.section].push(data.subsection);\n      }\n    } else if ('section' in data) {\n      if (data.course in this.state.cartCourses) {\n        newCartCourses[data.course][data.section] = [];\n\n        for (let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) {\n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      } else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n\n        for (let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) {\n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      }\n    } else {\n      newCartCourses[data.course] = {};\n\n      for (let i = 0; i < this.state.allCourses[courseIndex].sections.length; i++) {\n        newCartCourses[data.course][i] = [];\n\n        for (let c = 0; c < this.state.allCourses[courseIndex].sections[i].subsections.length; c++) {\n          newCartCourses[data.course][i].push(this.state.allCourses[courseIndex].sections[i].subsections[c]);\n        }\n      }\n    } // this.setState({cartCourses: newCartCourses});\n    // new ----------------------------------------\n\n\n    if (Object.keys(this.state.cartCourses).length === 0) {\n      let filterCourse = this.state.requi;\n      let temp;\n      temp = this.state.allCourses.filter(v => {\n        return v.number === data.course;\n      })[0];\n      filterCourse.push(temp);\n      this.setState({\n        requi: filterCourse\n      });\n    }\n\n    let tempReq = this.state.requi;\n    let Count = 0;\n    tempReq.forEach(v => {\n      if (v.requisites.length !== 0) {\n        v.requisites[0].forEach(name => {\n          if (name === data.course) {\n            Count++;\n          }\n        });\n      }\n    });\n    console.log(Count);\n\n    if (Count > 0) {\n      if (!window.confirm(\"You add it ?\")) {\n        return;\n      }\n    }\n\n    if (Object.keys(this.state.cartCourses).length !== 0) {\n      let filterCourse = this.state.requi;\n      let temp;\n      temp = this.state.allCourses.filter(v => {\n        return v.number === data.course;\n      })[0];\n      filterCourse.push(temp);\n      this.setState({\n        requi: filterCourse\n      });\n    }\n\n    this.setState({\n      cartCourses: newCartCourses\n    });\n  }\n\n  removeCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses));\n\n    if ('subsection' in data) {\n      newCartCourses[data.course][data.section].splice(newCartCourses[data.course][data.section].indexOf(data.subsection), 1);\n\n      if (newCartCourses[data.course][data.section].length === 0) {\n        delete newCartCourses[data.course][data.section];\n      }\n\n      if (Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    } else if ('section' in data) {\n      delete newCartCourses[data.course][data.section];\n\n      if (Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    } else {\n      delete newCartCourses[data.course];\n    }\n\n    this.setState({\n      cartCourses: newCartCourses\n    });\n  }\n\n  getCartData() {\n    let cartData = [];\n\n    for (const courseKey of Object.keys(this.state.cartCourses)) {\n      let course = this.state.allCourses.find(x => {\n        return x.number === courseKey;\n      });\n      cartData.push(course);\n    }\n\n    return cartData;\n  }\n\n  onSel(courses, course) {\n    let temp = this.state.recommend;\n\n    if (Number(courses) >= 3 && courses !== 'No Rating' && !temp.includes(course)) {\n      temp.push(course);\n    } else {\n      temp = temp.filter(v => {\n        return !(course === v);\n      });\n    }\n\n    this.setState({\n      recommend: temp\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"link\", {\n      rel: \"stylesheet\",\n      href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\",\n      integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\",\n      crossOrigin: \"anonymous\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Tabs, {\n      defaultActiveKey: \"search\",\n      style: {\n        position: 'fixed',\n        zIndex: 1,\n        width: '100%',\n        backgroundColor: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"search\",\n      title: \"Search\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      setCourses: courses => this.setCourses(courses),\n      courses: this.state.allCourses,\n      subjects: this.state.subjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '20vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: this.state.filteredCourses,\n      addCartCourse: data => this.addCartCourse(data),\n      removeCartCourse: data => this.removeCartCourse(data),\n      cartCourses: this.state.cartCourses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"cart\",\n      title: \"Cart\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '20vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: this.getCartData(),\n      addCartCourse: data => this.addCartCourse(data),\n      removeCartCourse: data => this.removeCartCourse(data),\n      cartCourses: this.state.cartCourses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"completedCourses\",\n      title: \"Completed Courses\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }\n    }, this.state.stop ? /*#__PURE__*/React.createElement(React.Fragment, null, \"loading...\") : /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '9vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(PreCourse, {\n      courses: this.state.allCourses,\n      onSel: (data, course) => {\n        this.onSel(data, course);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"recommendedCourses\",\n      title: \"Recommended Courses\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '9vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(RecommendedCourses, {\n      courses: this.state.recommend,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/kunlunwang/Downloads/test/src/App.js"],"names":["React","Sidebar","CourseArea","Tabs","Tab","PreCourse","App","Component","constructor","props","state","allCourses","filteredCourses","subjects","cartCourses","stop","recommend","modal","requi","componentDidMount","loadInitialState","courseURL","setState","courseData","fetch","json","getSubjects","data","push","i","length","indexOf","subject","setCourses","courses","addCartCourse","newCartCourses","JSON","parse","stringify","courseIndex","findIndex","x","number","course","section","subsection","sections","subsections","c","Object","keys","filterCourse","temp","filter","v","tempReq","Count","forEach","requisites","name","console","log","window","confirm","removeCartCourse","splice","getCartData","cartData","courseKey","find","onSel","Number","includes","render","position","zIndex","width","backgroundColor","paddingTop","marginLeft"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\n\nimport PreCourse from './PreCourse';\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: [],\n      filteredCourses: [],\n      subjects: [],\n      cartCourses: {},\n      stop: false,\n      recommend: [],\n      modal: false,\n      requi: []\n\n    };\n  }\n\n\n\n  componentDidMount() {\n   this.loadInitialState()\n  }\n\n  async loadInitialState(){\n    let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n\n    await this.setState({\n      stop: true\n    })\n    \n\n    let courseData = await (await fetch(courseURL)).json()\n\n    await this.setState({\n      stop: false\n    })\n\n    this.setState({allCourses: courseData, \n      filteredCourses: courseData, \n      subjects: this.getSubjects(courseData)});\n  }\n\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for(let i = 0; i < data.length; i++) {\n      if(subjects.indexOf(data[i].subject) === -1)\n        subjects.push(data[i].subject);\n    }\n\n    return subjects;\n  }\n\n  setCourses(courses) {\n    this.setState({filteredCourses: courses})\n  }\n\n  addCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses))// I think this is a hack to deepcopy\n    let courseIndex = this.state.allCourses.findIndex((x) => {return x.number===data.course})\n    if (courseIndex === -1)\n    {\n      return \n    }\n\n    if('subsection' in data) {\n      if(data.course in this.state.cartCourses) {\n        if(data.section in this.state.cartCourses[data.course]) {\n          newCartCourses[data.course][data.section].push(data.subsection);\n        }\n        else {\n          newCartCourses[data.course][data.section] = [];\n          newCartCourses[data.course][data.section].push(data.subsection);\n        }\n      }\n      else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n        newCartCourses[data.course][data.section].push(data.subsection);\n      }\n    }\n    else if('section' in data) {\n      if(data.course in this.state.cartCourses) {\n        newCartCourses[data.course][data.section] = [];\n\n        for(let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) {\n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      \n      \n      }\n      else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n        for(let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) { \n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      }\n    }\n    else {\n      newCartCourses[data.course] = {};\n\n\n      for (let i = 0; i < this.state.allCourses[courseIndex].sections.length; i++){\n        newCartCourses[data.course][i] = [];\n\n         for(let c= 0; c < this.state.allCourses[courseIndex].sections[i].subsections.length; c ++){\n          newCartCourses[data.course][i].push(this.state.allCourses[courseIndex].sections[i].subsections[c]);\n        }\n\n      }\n\n\n    }\n    // this.setState({cartCourses: newCartCourses});\n\n\n    // new ----------------------------------------\n    if(Object.keys(this.state.cartCourses).length === 0) {\n      let filterCourse = this.state.requi\n      let temp\n      temp = this.state.allCourses.filter(v => {\n        return v.number === data.course\n      })[0]\n      filterCourse.push(temp)\n      this.setState({requi: filterCourse})\n    }\n\n    let tempReq = this.state.requi\n    let Count = 0\n\n    tempReq.forEach(v => {\n      if(v.requisites.length !== 0) {\n        v.requisites[0].forEach(name => {\n          if(name === data.course) {\n            Count++;\n          }\n        })\n      }\n    })\n\n    console.log(Count)\n    if(Count > 0) {\n      if(!window.confirm(\"You add it ?\")) {\n        return \n      }\n    }\n\n    if(Object.keys(this.state.cartCourses).length !== 0){\n      let filterCourse = this.state.requi\n      let temp\n      temp = this.state.allCourses.filter(v => {\n        return v.number === data.course\n      })[0]\n      filterCourse.push(temp)\n      this.setState({requi: filterCourse})\n    }\n\n    this.setState({\n      cartCourses: newCartCourses\n    });\n\n\n  }\n\n  removeCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses))\n\n    if('subsection' in data) {\n      newCartCourses[data.course][data.section].splice(newCartCourses[data.course][data.section].indexOf(data.subsection), 1);\n      if(newCartCourses[data.course][data.section].length === 0) {\n        delete newCartCourses[data.course][data.section];\n      }\n      if(Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    }\n    else if('section' in data) {\n      delete newCartCourses[data.course][data.section];\n      if(Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    }\n    else {\n      delete newCartCourses[data.course];\n    }\n    this.setState({cartCourses: newCartCourses});\n  }\n\n  getCartData() {\n    let cartData = [];\n\n    for(const courseKey of Object.keys(this.state.cartCourses)) {\n      let course = this.state.allCourses.find((x) => {return x.number === courseKey})\n\n      cartData.push(course);\n    }\n    return cartData;\n  }\n\n\n\n  onSel(courses, course) {\n    let temp = this.state.recommend\n    if(Number(courses) >= 3 && courses !== 'No Rating' && !temp.includes(course)) {\n      temp.push(course)\n    } else {\n      temp = temp.filter(v => {\n        return !(course === v)\n      })\n    }\n    this.setState({\n      recommend: temp\n    })\n  }\n\n\n\n\n  render() {\n\n    return (\n      <>\n        <link\n          rel=\"stylesheet\"\n          href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\n          integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\"\n          crossOrigin=\"anonymous\"\n        />\n\n        <Tabs defaultActiveKey=\"search\" style={{position: 'fixed', zIndex: 1, width: '100%', backgroundColor: 'white'}}>\n\n\n          <Tab eventKey=\"search\" title=\"Search\" style={{paddingTop: '5vh'}}>\n            <Sidebar setCourses={(courses) => this.setCourses(courses)} courses={this.state.allCourses} subjects={this.state.subjects}/>\n            <div style={{marginLeft: '20vw'}}>\n              <CourseArea data={this.state.filteredCourses} addCartCourse={(data) => this.addCartCourse(data)} removeCartCourse={(data) => this.removeCartCourse(data)} cartCourses={this.state.cartCourses}/>\n            </div>\n          </Tab>\n\n\n          <Tab eventKey=\"cart\" title=\"Cart\" style={{paddingTop: '5vh'}}>\n            <div style={{marginLeft: '20vw'}}>\n              <CourseArea data={this.getCartData()} addCartCourse={(data) => this.addCartCourse(data)} removeCartCourse={(data) => this.removeCartCourse(data)} cartCourses={this.state.cartCourses}/>\n            </div>\n          </Tab>\n\n\n          <Tab eventKey=\"completedCourses\" title=\"Completed Courses\" style={{paddingTop: '5vh'}}>\n            {\n            this.state.stop ?<>loading...</> : (<div style={{marginLeft: '9vw'}}>\n              <PreCourse \n              courses={this.state.allCourses} \n              onSel={(data, course) => {this.onSel(data, course)}} />\n            </div>)\n            }\n          </Tab>\n\n\n\n          <Tab eventKey=\"recommendedCourses\" title=\"Recommended Courses\" style={{paddingTop: '5vh'}}>\n            <div style={{marginLeft: '9vw'}}>\n              <RecommendedCourses courses={this.state.recommend}  />\n            </div>\n          </Tab>\n\n          \n\n\n\n        </Tabs>\n      </>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}