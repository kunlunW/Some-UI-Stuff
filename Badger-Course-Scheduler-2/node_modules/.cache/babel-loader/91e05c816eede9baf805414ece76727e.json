{"ast":null,"code":"var _jsxFileName = \"/Users/kunlunwang/Downloads/test/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport CompletedCourses from './CompletedCourses';\nimport Recommender from './Recommender';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: {},\n      filteredCourses: {},\n      subjects: [],\n      completedList: {},\n      ratedCourses: [],\n      cartCourses: [],\n      enrolledCourses: {},\n      interestList: []\n    };\n  }\n\n  async componentDidMount() {\n    let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    let courseData = await (await fetch(courseURL)).json();\n    this.setState({\n      allCourses: courseData,\n      filteredCourses: courseData,\n      subjects: this.getSubjects(courseData)\n    });\n    const completedCoursesURL = await fetch(\"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed \");\n    const completedCoursesData = await completedCoursesURL.json();\n    let enrollCourse = this.getEnrolledCourses(completedCoursesData);\n    this.setState({\n      enrolledCourses: enrollCourse\n    }); // this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)});\n    // this.loadInitialState();\n    //this.loadPreCourse();\n  }\n\n  async loadInitialState() {// let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    // let courseData = await (await fetch(courseURL)).json()\n    // this.setState({allCourses: courseData, filteredCourses: courseData, subjects: this.getSubjects(courseData)});\n    // let completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n    // let completedCoursesData = await (await fetch(completedCoursesURL)).json()\n    // this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n  }\n\n  getEnrolledCourses(data) {\n    let courses = {};\n    let names = [];\n\n    for (const course of Object.values(data)) {\n      for (const c of Object.values(course)) {\n        names.push(c);\n      }\n    } //console.log(names);\n\n\n    for (let course of Object.keys(this.state.allCourses)) {\n      for (let j = 0; j < names.length; j++) {\n        if (course === names[j]) {\n          courses[course] = this.state.allCourses[course];\n          courses[course].rating = 1; //console.log(courses[course]);\n        }\n      }\n    } //console.log(courses);\n\n\n    return courses;\n  } // async loadPreCourse () {\n  //   let completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n  //   let completedCoursesData = await (await fetch(completedCoursesURL)).json()\n  //   this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n  // }\n\n\n  getCompletedCourseList(preCourses) {\n    let preList = preCourses.data;\n    let completeList = [];\n\n    for (const [key, course] of Object.entries(this.state.allCourses)) {\n      if (preList.indexOf(key) !== -1) {\n        course.rating = false;\n        completeList.push([key, course]);\n      }\n    }\n\n    return completeList;\n  }\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for (let i = 0; i < data.length; i++) {\n      if (subjects.indexOf(data[i].subject) === -1) subjects.push(data[i].subject);\n    }\n\n    return subjects;\n  }\n\n  setCourses(courses) {\n    this.setState({\n      filteredCourses: courses\n    });\n  }\n\n  rateCourse(course) {\n    var tempList = this.state.ratedCourses;\n    course[1].rating = course[1].rating ? false : true;\n\n    if (course[1].rating) {\n      tempList.push(course);\n    } else {\n      tempList = tempList.filter(tempCourse => {\n        if (tempCourse[0] === course[0]) {\n          return 0;\n        } else {\n          return 1;\n        }\n      });\n    }\n\n    this.setState({\n      ratedCourses: tempList\n    });\n  }\n\n  addCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses)); // I think this is a hack to deepcopy\n\n    let courseIndex = this.state.allCourses.findIndex(x => {\n      return x.number === data.course;\n    });\n\n    if (courseIndex === -1) {\n      return;\n    }\n\n    if ('subsection' in data) {\n      if (data.course in this.state.cartCourses) {\n        if (data.section in this.state.cartCourses[data.course]) {\n          newCartCourses[data.course][data.section].push(data.subsection);\n        } else {\n          newCartCourses[data.course][data.section] = [];\n          newCartCourses[data.course][data.section].push(data.subsection);\n        }\n      } else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n        newCartCourses[data.course][data.section].push(data.subsection);\n      }\n    } else if ('section' in data) {\n      if (data.course in this.state.cartCourses) {\n        newCartCourses[data.course][data.section] = [];\n\n        for (let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) {\n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      } else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n\n        for (let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) {\n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      }\n    } else {\n      newCartCourses[data.course] = {};\n\n      for (let i = 0; i < this.state.allCourses[courseIndex].sections.length; i++) {\n        newCartCourses[data.course][i] = [];\n\n        for (let c = 0; c < this.state.allCourses[courseIndex].sections[i].subsections.length; c++) {\n          newCartCourses[data.course][i].push(this.state.allCourses[courseIndex].sections[i].subsections[c]);\n        }\n      }\n    }\n\n    this.setState({\n      cartCourses: newCartCourses\n    });\n  }\n\n  removeCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses));\n\n    if ('subsection' in data) {\n      newCartCourses[data.course][data.section].splice(newCartCourses[data.course][data.section].indexOf(data.subsection), 1);\n\n      if (newCartCourses[data.course][data.section].length === 0) {\n        delete newCartCourses[data.course][data.section];\n      }\n\n      if (Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    } else if ('section' in data) {\n      delete newCartCourses[data.course][data.section];\n\n      if (Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    } else {\n      delete newCartCourses[data.course];\n    }\n\n    this.setState({\n      cartCourses: newCartCourses\n    });\n  }\n\n  getCartData() {\n    let cartData = [];\n\n    for (const courseKey of Object.keys(this.state.cartCourses)) {\n      let course = this.state.allCourses.find(x => {\n        return x.number === courseKey;\n      });\n      cartData.push(course);\n    }\n\n    return cartData;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"link\", {\n      rel: \"stylesheet\",\n      href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\",\n      integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\",\n      crossOrigin: \"anonymous\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Tabs, {\n      defaultActiveKey: \"search\",\n      style: {\n        position: 'fixed',\n        zIndex: 1,\n        width: '100%',\n        backgroundColor: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"search\",\n      title: \"Search\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      setCourses: courses => this.setCourses(courses),\n      courses: this.state.allCourses,\n      subjects: this.state.subjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '20vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: this.state.filteredCourses,\n      addCartCourse: data => this.addCartCourse(data),\n      removeCartCourse: data => this.removeCartCourse(data),\n      cartCourses: this.state.cartCourses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"cart\",\n      title: \"Cart\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '20vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: this.getCartData(),\n      addCartCourse: data => this.addCartCourse(data),\n      removeCartCourse: data => this.removeCartCourse(data),\n      cartCourses: this.state.cartCourses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"coursesCompleted\",\n      title: \"Courses Completed\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CompletedCourses, {\n      data: this.state.getEnrolledCourses,\n      rateCourse: course => this.rateCourse(course),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"recommender\",\n      title: \"Recommender\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Recommender, {\n      aCourses: this.state.allCourses,\n      iList: this.state.interestList,\n      sList: this.state.subjects,\n      rCourses: this.state.ratedCourses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/kunlunwang/Downloads/test/src/App.js"],"names":["React","Sidebar","CourseArea","Tabs","Tab","CompletedCourses","Recommender","App","Component","constructor","props","state","allCourses","filteredCourses","subjects","completedList","ratedCourses","cartCourses","enrolledCourses","interestList","componentDidMount","courseURL","courseData","fetch","json","setState","getSubjects","completedCoursesURL","completedCoursesData","enrollCourse","getEnrolledCourses","loadInitialState","data","courses","names","course","Object","values","c","push","keys","j","length","rating","getCompletedCourseList","preCourses","preList","completeList","key","entries","indexOf","i","subject","setCourses","rateCourse","tempList","filter","tempCourse","addCartCourse","newCartCourses","JSON","parse","stringify","courseIndex","findIndex","x","number","section","subsection","sections","subsections","removeCartCourse","splice","getCartData","cartData","courseKey","find","render","position","zIndex","width","backgroundColor","paddingTop","marginLeft"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,OAAOC,WAAP,MAAwB,eAAxB;;AAGA,MAAMC,GAAN,SAAkBP,KAAK,CAACQ,SAAxB,CAAkC;AAChCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAE,EADD;AAEXC,MAAAA,eAAe,EAAE,EAFN;AAGXC,MAAAA,QAAQ,EAAE,EAHC;AAIXC,MAAAA,aAAa,EAAE,EAJJ;AAKXC,MAAAA,YAAY,EAAE,EALH;AAMXC,MAAAA,WAAW,EAAE,EANF;AAQXC,MAAAA,eAAe,EAAE,EARN;AASXC,MAAAA,YAAY,EAAE;AATH,KAAb;AAWD;;AAID,QAAMC,iBAAN,GAA0B;AAExB,QAAIC,SAAS,GAAG,uDAAhB;AACA,QAAIC,UAAU,GAAG,MAAM,CAAC,MAAMC,KAAK,CAACF,SAAD,CAAZ,EAAyBG,IAAzB,EAAvB;AAEA,SAAKC,QAAL,CAAc;AAACb,MAAAA,UAAU,EAAEU,UAAb;AAAyBT,MAAAA,eAAe,EAAES,UAA1C;AAAsDR,MAAAA,QAAQ,EAAE,KAAKY,WAAL,CAAiBJ,UAAjB;AAAhE,KAAd;AAGA,UAAMK,mBAAmB,GAAG,MAAMJ,KAAK,CAAC,sFAAD,CAAvC;AACA,UAAMK,oBAAoB,GAAG,MAAMD,mBAAmB,CAACH,IAApB,EAAnC;AAEA,QAAIK,YAAY,GAAG,KAAKC,kBAAL,CAAwBF,oBAAxB,CAAnB;AAEA,SAAKH,QAAL,CAAc;AAACP,MAAAA,eAAe,EAAEW;AAAlB,KAAd,EAbwB,CAgBxB;AAGD;AACA;AACA;;AAED,QAAME,gBAAN,GAAwB,CACtB;AACA;AAEA;AAGA;AACA;AAEA;AAGD;;AAGDD,EAAAA,kBAAkB,CAACE,IAAD,EAAO;AACvB,QAAIC,OAAO,GAAG,EAAd;AACA,QAAIC,KAAK,GAAG,EAAZ;;AAEA,SAAI,MAAMC,MAAV,IAAoBC,MAAM,CAACC,MAAP,CAAcL,IAAd,CAApB,EAAyC;AACvC,WAAI,MAAMM,CAAV,IAAeF,MAAM,CAACC,MAAP,CAAcF,MAAd,CAAf,EAAqC;AACnCD,QAAAA,KAAK,CAACK,IAAN,CAAWD,CAAX;AACD;AACF,KARsB,CASvB;;;AAEA,SAAI,IAAIH,MAAR,IAAkBC,MAAM,CAACI,IAAP,CAAY,KAAK7B,KAAL,CAAWC,UAAvB,CAAlB,EAAsD;AACpD,WAAI,IAAI6B,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACP,KAAK,CAACQ,MAArB,EAA6BD,CAAC,EAA9B,EAAkC;AAChC,YAAGN,MAAM,KAAKD,KAAK,CAACO,CAAD,CAAnB,EAAwB;AACtBR,UAAAA,OAAO,CAACE,MAAD,CAAP,GAAkB,KAAKxB,KAAL,CAAWC,UAAX,CAAsBuB,MAAtB,CAAlB;AACAF,UAAAA,OAAO,CAACE,MAAD,CAAP,CAAgBQ,MAAhB,GAAyB,CAAzB,CAFsB,CAGtB;AACD;AACF;AACF,KAnBsB,CAqBvB;;;AACA,WAAOV,OAAP;AACD,GAhF+B,CAmFhC;AACA;AACA;AAEA;AACA;;;AAEAW,EAAAA,sBAAsB,CAACC,UAAD,EAAY;AAChC,QAAIC,OAAO,GAAGD,UAAU,CAACb,IAAzB;AACA,QAAIe,YAAY,GAAG,EAAnB;;AACA,SAAI,MAAM,CAACC,GAAD,EAAMb,MAAN,CAAV,IAA2BC,MAAM,CAACa,OAAP,CAAe,KAAKtC,KAAL,CAAWC,UAA1B,CAA3B,EAAkE;AAEhE,UAAGkC,OAAO,CAACI,OAAR,CAAgBF,GAAhB,MAAyB,CAAC,CAA7B,EAA+B;AAC7Bb,QAAAA,MAAM,CAACQ,MAAP,GAAgB,KAAhB;AACAI,QAAAA,YAAY,CAACR,IAAb,CAAkB,CAACS,GAAD,EAAMb,MAAN,CAAlB;AACD;AACF;;AACD,WAAOY,YAAP;AACD;;AAGDrB,EAAAA,WAAW,CAACM,IAAD,EAAO;AAChB,QAAIlB,QAAQ,GAAG,EAAf;AACAA,IAAAA,QAAQ,CAACyB,IAAT,CAAc,KAAd;;AAEA,SAAI,IAAIY,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGnB,IAAI,CAACU,MAAxB,EAAgCS,CAAC,EAAjC,EAAqC;AACnC,UAAGrC,QAAQ,CAACoC,OAAT,CAAiBlB,IAAI,CAACmB,CAAD,CAAJ,CAAQC,OAAzB,MAAsC,CAAC,CAA1C,EACEtC,QAAQ,CAACyB,IAAT,CAAcP,IAAI,CAACmB,CAAD,CAAJ,CAAQC,OAAtB;AACH;;AAED,WAAOtC,QAAP;AACD;;AAEDuC,EAAAA,UAAU,CAACpB,OAAD,EAAU;AAClB,SAAKR,QAAL,CAAc;AAACZ,MAAAA,eAAe,EAAEoB;AAAlB,KAAd;AACD;;AAGDqB,EAAAA,UAAU,CAACnB,MAAD,EAAQ;AAChB,QAAIoB,QAAQ,GAAG,KAAK5C,KAAL,CAAWK,YAA1B;AACAmB,IAAAA,MAAM,CAAC,CAAD,CAAN,CAAUQ,MAAV,GAAmBR,MAAM,CAAC,CAAD,CAAN,CAAUQ,MAAV,GAAiB,KAAjB,GAAuB,IAA1C;;AACA,QAAGR,MAAM,CAAC,CAAD,CAAN,CAAUQ,MAAb,EAAoB;AAClBY,MAAAA,QAAQ,CAAChB,IAAT,CAAcJ,MAAd;AACD,KAFD,MAGI;AACFoB,MAAAA,QAAQ,GAAGA,QAAQ,CAACC,MAAT,CAAiBC,UAAD,IAAc;AACvC,YAAGA,UAAU,CAAC,CAAD,CAAV,KAAkBtB,MAAM,CAAC,CAAD,CAA3B,EAA+B;AAC7B,iBAAO,CAAP;AACD,SAFD,MAGI;AACF,iBAAO,CAAP;AACD;AACF,OAPU,CAAX;AAQD;;AACD,SAAKV,QAAL,CAAc;AAACT,MAAAA,YAAY,EAAEuC;AAAf,KAAd;AACD;;AAMDG,EAAAA,aAAa,CAAC1B,IAAD,EAAO;AAClB,QAAI2B,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,KAAKnD,KAAL,CAAWM,WAA1B,CAAX,CAArB,CADkB,CACqD;;AACvE,QAAI8C,WAAW,GAAG,KAAKpD,KAAL,CAAWC,UAAX,CAAsBoD,SAAtB,CAAiCC,CAAD,IAAO;AAAC,aAAOA,CAAC,CAACC,MAAF,KAAWlC,IAAI,CAACG,MAAvB;AAA8B,KAAtE,CAAlB;;AACA,QAAI4B,WAAW,KAAK,CAAC,CAArB,EACA;AACE;AACD;;AAED,QAAG,gBAAgB/B,IAAnB,EAAyB;AACvB,UAAGA,IAAI,CAACG,MAAL,IAAe,KAAKxB,KAAL,CAAWM,WAA7B,EAA0C;AACxC,YAAGe,IAAI,CAACmC,OAAL,IAAgB,KAAKxD,KAAL,CAAWM,WAAX,CAAuBe,IAAI,CAACG,MAA5B,CAAnB,EAAwD;AACtDwB,UAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,EAA0C5B,IAA1C,CAA+CP,IAAI,CAACoC,UAApD;AACD,SAFD,MAGK;AACHT,UAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,IAA4C,EAA5C;AACAR,UAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,EAA0C5B,IAA1C,CAA+CP,IAAI,CAACoC,UAApD;AACD;AACF,OARD,MASK;AACHT,QAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,GAA8B,EAA9B;AACAwB,QAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,IAA4C,EAA5C;AACAR,QAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,EAA0C5B,IAA1C,CAA+CP,IAAI,CAACoC,UAApD;AACD;AACF,KAfD,MAgBK,IAAG,aAAapC,IAAhB,EAAsB;AACzB,UAAGA,IAAI,CAACG,MAAL,IAAe,KAAKxB,KAAL,CAAWM,WAA7B,EAA0C;AACxC0C,QAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,IAA4C,EAA5C;;AAEA,aAAI,IAAIhB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,KAAKxC,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4CrC,IAAI,CAACmC,OAAjD,EAA0DG,WAA1D,CAAsE5B,MAAzF,EAAiGS,CAAC,EAAlG,EAAsG;AACpGQ,UAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,EAA0C5B,IAA1C,CAA+C,KAAK5B,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4CrC,IAAI,CAACmC,OAAjD,EAA0DG,WAA1D,CAAsEnB,CAAtE,CAA/C;AACD;AAGF,OARD,MASK;AACHQ,QAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,GAA8B,EAA9B;AACAwB,QAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,IAA4C,EAA5C;;AACA,aAAI,IAAIhB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,KAAKxC,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4CrC,IAAI,CAACmC,OAAjD,EAA0DG,WAA1D,CAAsE5B,MAAzF,EAAiGS,CAAC,EAAlG,EAAsG;AACpGQ,UAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,EAA0C5B,IAA1C,CAA+C,KAAK5B,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4CrC,IAAI,CAACmC,OAAjD,EAA0DG,WAA1D,CAAsEnB,CAAtE,CAA/C;AACD;AACF;AACF,KAjBI,MAkBA;AACHQ,MAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,GAA8B,EAA9B;;AAGA,WAAK,IAAIgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKxC,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4C3B,MAAhE,EAAwES,CAAC,EAAzE,EAA4E;AAC1EQ,QAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BgB,CAA5B,IAAiC,EAAjC;;AAEC,aAAI,IAAIb,CAAC,GAAE,CAAX,EAAcA,CAAC,GAAG,KAAK3B,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4ClB,CAA5C,EAA+CmB,WAA/C,CAA2D5B,MAA7E,EAAqFJ,CAAC,EAAtF,EAA0F;AACzFqB,UAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BgB,CAA5B,EAA+BZ,IAA/B,CAAoC,KAAK5B,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4ClB,CAA5C,EAA+CmB,WAA/C,CAA2DhC,CAA3D,CAApC;AACD;AAEF;AAGF;;AACD,SAAKb,QAAL,CAAc;AAACR,MAAAA,WAAW,EAAE0C;AAAd,KAAd;AACD;;AAEDY,EAAAA,gBAAgB,CAACvC,IAAD,EAAO;AACrB,QAAI2B,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,KAAKnD,KAAL,CAAWM,WAA1B,CAAX,CAArB;;AAEA,QAAG,gBAAgBe,IAAnB,EAAyB;AACvB2B,MAAAA,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,EAA0CK,MAA1C,CAAiDb,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,EAA0CjB,OAA1C,CAAkDlB,IAAI,CAACoC,UAAvD,CAAjD,EAAqH,CAArH;;AACA,UAAGT,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,EAA0CzB,MAA1C,KAAqD,CAAxD,EAA2D;AACzD,eAAOiB,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,CAAP;AACD;;AACD,UAAG/B,MAAM,CAACI,IAAP,CAAYmB,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAA1B,EAAyCO,MAAzC,KAAoD,CAAvD,EAA0D;AACxD,eAAOiB,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAArB;AACD;AACF,KARD,MASK,IAAG,aAAaH,IAAhB,EAAsB;AACzB,aAAO2B,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAAd,CAA4BH,IAAI,CAACmC,OAAjC,CAAP;;AACA,UAAG/B,MAAM,CAACI,IAAP,CAAYmB,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAA1B,EAAyCO,MAAzC,KAAoD,CAAvD,EAA0D;AACxD,eAAOiB,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAArB;AACD;AACF,KALI,MAMA;AACH,aAAOwB,cAAc,CAAC3B,IAAI,CAACG,MAAN,CAArB;AACD;;AACD,SAAKV,QAAL,CAAc;AAACR,MAAAA,WAAW,EAAE0C;AAAd,KAAd;AACD;;AAEDc,EAAAA,WAAW,GAAG;AACZ,QAAIC,QAAQ,GAAG,EAAf;;AAEA,SAAI,MAAMC,SAAV,IAAuBvC,MAAM,CAACI,IAAP,CAAY,KAAK7B,KAAL,CAAWM,WAAvB,CAAvB,EAA4D;AAC1D,UAAIkB,MAAM,GAAG,KAAKxB,KAAL,CAAWC,UAAX,CAAsBgE,IAAtB,CAA4BX,CAAD,IAAO;AAAC,eAAOA,CAAC,CAACC,MAAF,KAAaS,SAApB;AAA8B,OAAjE,CAAb;AAEAD,MAAAA,QAAQ,CAACnC,IAAT,CAAcJ,MAAd;AACD;;AACD,WAAOuC,QAAP;AACD;;AAEDG,EAAAA,MAAM,GAAG;AAEP,wBACE,uDACE;AACE,MAAA,GAAG,EAAC,YADN;AAEE,MAAA,IAAI,EAAC,uEAFP;AAGE,MAAA,SAAS,EAAC,yEAHZ;AAIE,MAAA,WAAW,EAAC,WAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE,oBAAC,IAAD;AAAM,MAAA,gBAAgB,EAAC,QAAvB;AAAgC,MAAA,KAAK,EAAE;AAACC,QAAAA,QAAQ,EAAE,OAAX;AAAoBC,QAAAA,MAAM,EAAE,CAA5B;AAA+BC,QAAAA,KAAK,EAAE,MAAtC;AAA8CC,QAAAA,eAAe,EAAE;AAA/D,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGE,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,QAAd;AAAuB,MAAA,KAAK,EAAC,QAA7B;AAAsC,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAE;AAAb,OAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,OAAD;AAAS,MAAA,UAAU,EAAGjD,OAAD,IAAa,KAAKoB,UAAL,CAAgBpB,OAAhB,CAAlC;AAA4D,MAAA,OAAO,EAAE,KAAKtB,KAAL,CAAWC,UAAhF;AAA4F,MAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWG,QAAjH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAK,MAAA,KAAK,EAAE;AAACqE,QAAAA,UAAU,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AAAY,MAAA,IAAI,EAAE,KAAKxE,KAAL,CAAWE,eAA7B;AAA8C,MAAA,aAAa,EAAGmB,IAAD,IAAU,KAAK0B,aAAL,CAAmB1B,IAAnB,CAAvE;AAAiG,MAAA,gBAAgB,EAAGA,IAAD,IAAU,KAAKuC,gBAAL,CAAsBvC,IAAtB,CAA7H;AAA0J,MAAA,WAAW,EAAE,KAAKrB,KAAL,CAAWM,WAAlL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAFF,CAHF,eAWE,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,MAAd;AAAqB,MAAA,KAAK,EAAC,MAA3B;AAAkC,MAAA,KAAK,EAAE;AAACiE,QAAAA,UAAU,EAAE;AAAb,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AAAY,MAAA,IAAI,EAAE,KAAKV,WAAL,EAAlB;AAAsC,MAAA,aAAa,EAAGzC,IAAD,IAAU,KAAK0B,aAAL,CAAmB1B,IAAnB,CAA/D;AAAyF,MAAA,gBAAgB,EAAGA,IAAD,IAAU,KAAKuC,gBAAL,CAAsBvC,IAAtB,CAArH;AAAkJ,MAAA,WAAW,EAAE,KAAKrB,KAAL,CAAWM,WAA1K;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CAXF,eAkBE,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,kBAAd;AAAiC,MAAA,KAAK,EAAC,mBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,gBAAD;AAAkB,MAAA,IAAI,EAAE,KAAKN,KAAL,CAAWmB,kBAAnC;AAAuD,MAAA,UAAU,EAAGK,MAAD,IAAU,KAAKmB,UAAL,CAAgBnB,MAAhB,CAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAlBF,eAsBE,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,aAAd;AAA4B,MAAA,KAAK,EAAC,aAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,WAAD;AAAa,MAAA,QAAQ,EAAE,KAAKxB,KAAL,CAAWC,UAAlC;AAA8C,MAAA,KAAK,EAAE,KAAKD,KAAL,CAAWQ,YAAhE;AAA8E,MAAA,KAAK,EAAE,KAAKR,KAAL,CAAWG,QAAhG;AAA0G,MAAA,QAAQ,EAAE,KAAKH,KAAL,CAAWK,YAA/H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAtBF,CARF,CADF;AAsCD;;AAvR+B;;AA0RlC,eAAeT,GAAf","sourcesContent":["import React from 'react';\nimport './App.css';\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport CompletedCourses from './CompletedCourses';\nimport Recommender from './Recommender';\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: {},\n      filteredCourses: {},\n      subjects: [],\n      completedList: {},\n      ratedCourses: [],\n      cartCourses: [],\n\n      enrolledCourses: {},\n      interestList: [],\n    };\n  }\n\n\n\n  async componentDidMount() {\n\n    let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    let courseData = await (await fetch(courseURL)).json()\n\n    this.setState({allCourses: courseData, filteredCourses: courseData, subjects: this.getSubjects(courseData)});\n\n\n    const completedCoursesURL = await fetch(\"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed \") ; \n    const completedCoursesData = await completedCoursesURL.json()\n\n    let enrollCourse = this.getEnrolledCourses(completedCoursesData)\n\n    this.setState({enrolledCourses: enrollCourse});\n\n\n    // this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)});\n\n    \n   // this.loadInitialState();\n   //this.loadPreCourse();\n  }\n\n  async loadInitialState(){\n    // let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    // let courseData = await (await fetch(courseURL)).json()\n\n    // this.setState({allCourses: courseData, filteredCourses: courseData, subjects: this.getSubjects(courseData)});\n\n\n    // let completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n    // let completedCoursesData = await (await fetch(completedCoursesURL)).json()\n\n    // this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n\n\n  }\n\n\n  getEnrolledCourses(data) {\n    let courses = {};\n    let names = [];\n\n    for(const course of Object.values(data)) {\n      for(const c of Object.values(course)){\n        names.push(c);\n      }\n    }\n    //console.log(names);\n\n    for(let course of Object.keys(this.state.allCourses)) {\n      for(let j=0; j<names.length; j++) {\n        if(course === names[j]) {\n          courses[course] = this.state.allCourses[course];\n          courses[course].rating = 1;\n          //console.log(courses[course]);\n        }\n      }\n    }\n    \n    //console.log(courses);\n    return courses;\n  }\n\n\n  // async loadPreCourse () {\n  //   let completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n  //   let completedCoursesData = await (await fetch(completedCoursesURL)).json()\n\n  //   this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n  // }\n\n  getCompletedCourseList(preCourses){\n    let preList = preCourses.data;\n    let completeList = [];\n    for(const [key, course] of Object.entries(this.state.allCourses)) {\n      \n      if(preList.indexOf(key) !== -1){\n        course.rating = false;\n        completeList.push([key, course]);\n      }\n    }\n    return completeList;\n  }\n\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for(let i = 0; i < data.length; i++) {\n      if(subjects.indexOf(data[i].subject) === -1)\n        subjects.push(data[i].subject);\n    }\n\n    return subjects;\n  }\n  \n  setCourses(courses) {\n    this.setState({filteredCourses: courses})\n  }\n\n\n  rateCourse(course){\n    var tempList = this.state.ratedCourses;\n    course[1].rating = course[1].rating?false:true;\n    if(course[1].rating){\n      tempList.push(course);\n    }\n    else{\n      tempList = tempList.filter((tempCourse)=>{\n        if(tempCourse[0] === course[0]){\n          return 0;\n        }\n        else{\n          return 1;\n        }\n      });\n    }\n    this.setState({ratedCourses: tempList})\n  }\n\n\n\n\n\n  addCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses))// I think this is a hack to deepcopy\n    let courseIndex = this.state.allCourses.findIndex((x) => {return x.number===data.course})\n    if (courseIndex === -1)\n    {\n      return \n    }\n\n    if('subsection' in data) {\n      if(data.course in this.state.cartCourses) {\n        if(data.section in this.state.cartCourses[data.course]) {\n          newCartCourses[data.course][data.section].push(data.subsection);\n        }\n        else {\n          newCartCourses[data.course][data.section] = [];\n          newCartCourses[data.course][data.section].push(data.subsection);\n        }\n      }\n      else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n        newCartCourses[data.course][data.section].push(data.subsection);\n      }\n    }\n    else if('section' in data) {\n      if(data.course in this.state.cartCourses) {\n        newCartCourses[data.course][data.section] = [];\n\n        for(let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) {\n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      \n      \n      }\n      else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n        for(let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) { \n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      }\n    }\n    else {\n      newCartCourses[data.course] = {};\n\n\n      for (let i = 0; i < this.state.allCourses[courseIndex].sections.length; i++){\n        newCartCourses[data.course][i] = [];\n\n         for(let c= 0; c < this.state.allCourses[courseIndex].sections[i].subsections.length; c ++){\n          newCartCourses[data.course][i].push(this.state.allCourses[courseIndex].sections[i].subsections[c]);\n        }\n\n      }\n\n\n    }\n    this.setState({cartCourses: newCartCourses});\n  }\n\n  removeCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses))\n\n    if('subsection' in data) {\n      newCartCourses[data.course][data.section].splice(newCartCourses[data.course][data.section].indexOf(data.subsection), 1);\n      if(newCartCourses[data.course][data.section].length === 0) {\n        delete newCartCourses[data.course][data.section];\n      }\n      if(Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    }\n    else if('section' in data) {\n      delete newCartCourses[data.course][data.section];\n      if(Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    }\n    else {\n      delete newCartCourses[data.course];\n    }\n    this.setState({cartCourses: newCartCourses});\n  }\n\n  getCartData() {\n    let cartData = [];\n\n    for(const courseKey of Object.keys(this.state.cartCourses)) {\n      let course = this.state.allCourses.find((x) => {return x.number === courseKey})\n\n      cartData.push(course);\n    }\n    return cartData;\n  }\n\n  render() {\n\n    return (\n      <>\n        <link\n          rel=\"stylesheet\"\n          href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\n          integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\"\n          crossOrigin=\"anonymous\"\n        />\n\n        <Tabs defaultActiveKey=\"search\" style={{position: 'fixed', zIndex: 1, width: '100%', backgroundColor: 'white'}}>\n\n\n          <Tab eventKey=\"search\" title=\"Search\" style={{paddingTop: '5vh'}}>\n            <Sidebar setCourses={(courses) => this.setCourses(courses)} courses={this.state.allCourses} subjects={this.state.subjects}/>\n            <div style={{marginLeft: '20vw'}}>\n              <CourseArea data={this.state.filteredCourses} addCartCourse={(data) => this.addCartCourse(data)} removeCartCourse={(data) => this.removeCartCourse(data)} cartCourses={this.state.cartCourses}/>\n            </div>\n          </Tab>\n\n\n          <Tab eventKey=\"cart\" title=\"Cart\" style={{paddingTop: '5vh'}}>\n            <div style={{marginLeft: '20vw'}}>\n              <CourseArea data={this.getCartData()} addCartCourse={(data) => this.addCartCourse(data)} removeCartCourse={(data) => this.removeCartCourse(data)} cartCourses={this.state.cartCourses}/>\n            </div>\n          </Tab>\n\n\n          <Tab eventKey=\"coursesCompleted\" title=\"Courses Completed\">\n            <CompletedCourses data={this.state.getEnrolledCourses} rateCourse={(course)=>this.rateCourse(course)}/>\n          </Tab>\n\n          <Tab eventKey=\"recommender\" title=\"Recommender\">\n            <Recommender aCourses={this.state.allCourses} iList={this.state.interestList} sList={this.state.subjects} rCourses={this.state.ratedCourses}/>\n          </Tab>\n\n        </Tabs>\n      </>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}