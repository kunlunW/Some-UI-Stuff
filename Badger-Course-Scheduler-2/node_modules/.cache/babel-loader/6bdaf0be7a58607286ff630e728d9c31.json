{"ast":null,"code":"var _jsxFileName = \"/Users/kunlunwang/Downloads/test/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport CompletedCourses from './CompletedCourses';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: [],\n      filteredCourses: [],\n      subjects: [],\n      completedList: [],\n      ratedCourses: [],\n      cartCourses: {}\n    };\n  }\n\n  async componentDidMount() {\n    let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    let courseData = await (await fetch(courseURL)).json();\n    this.setState({\n      allCourses: courseData,\n      filteredCourses: courseData,\n      subjects: this.getSubjects(courseData)\n    });\n    const completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\";\n    const completedCoursesData = await (await fetch(completedCoursesURL)).json();\n    this.setState({\n      completedList: this.getCompletedCourseList(completedCoursesData)\n    }); // this.loadInitialState();\n    //this.loadPreCourse();\n  }\n\n  async loadInitialState() {// let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    // let courseData = await (await fetch(courseURL)).json()\n    // this.setState({allCourses: courseData, filteredCourses: courseData, subjects: this.getSubjects(courseData)});\n    // let completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n    // let completedCoursesData = await (await fetch(completedCoursesURL)).json()\n    // this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n  } // async loadPreCourse () {\n  //   let completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n  //   let completedCoursesData = await (await fetch(completedCoursesURL)).json()\n  //   this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n  // }\n\n\n  getCompletedCourseList(preCourses) {\n    let preList = preCourses.data;\n    let completeList = [];\n\n    for (const [key, course] of Object.entries(this.state.allCourses)) {\n      if (preList.indexOf(key) !== -1) {\n        // course.rating = false;\n        completeList.push([key, course]);\n      }\n    }\n\n    return completeList;\n  }\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for (let i = 0; i < data.length; i++) {\n      if (subjects.indexOf(data[i].subject) === -1) subjects.push(data[i].subject);\n    }\n\n    return subjects;\n  }\n\n  setCourses(courses) {\n    this.setState({\n      filteredCourses: courses\n    });\n  }\n\n  rateCourse(course) {\n    var tempList = this.state.ratedCourses;\n    course[1].rating = course[1].rating ? false : true;\n\n    if (course[1].rating) {\n      tempList.push(course);\n    } else {\n      tempList = tempList.filter(tempCourse => {\n        if (tempCourse[0] === course[0]) {\n          return 0;\n        } else {\n          return 1;\n        }\n      });\n    }\n\n    this.setState({\n      ratedCourses: tempList\n    });\n  }\n\n  addCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses)); // I think this is a hack to deepcopy\n\n    let courseIndex = this.state.allCourses.findIndex(x => {\n      return x.number === data.course;\n    });\n\n    if (courseIndex === -1) {\n      return;\n    }\n\n    if ('subsection' in data) {\n      if (data.course in this.state.cartCourses) {\n        if (data.section in this.state.cartCourses[data.course]) {\n          newCartCourses[data.course][data.section].push(data.subsection);\n        } else {\n          newCartCourses[data.course][data.section] = [];\n          newCartCourses[data.course][data.section].push(data.subsection);\n        }\n      } else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n        newCartCourses[data.course][data.section].push(data.subsection);\n      }\n    } else if ('section' in data) {\n      if (data.course in this.state.cartCourses) {\n        newCartCourses[data.course][data.section] = [];\n\n        for (let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) {\n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      } else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n\n        for (let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) {\n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      }\n    } else {\n      newCartCourses[data.course] = {};\n\n      for (let i = 0; i < this.state.allCourses[courseIndex].sections.length; i++) {\n        newCartCourses[data.course][i] = [];\n\n        for (let c = 0; c < this.state.allCourses[courseIndex].sections[i].subsections.length; c++) {\n          newCartCourses[data.course][i].push(this.state.allCourses[courseIndex].sections[i].subsections[c]);\n        }\n      }\n    }\n\n    this.setState({\n      cartCourses: newCartCourses\n    });\n  }\n\n  removeCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses));\n\n    if ('subsection' in data) {\n      newCartCourses[data.course][data.section].splice(newCartCourses[data.course][data.section].indexOf(data.subsection), 1);\n\n      if (newCartCourses[data.course][data.section].length === 0) {\n        delete newCartCourses[data.course][data.section];\n      }\n\n      if (Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    } else if ('section' in data) {\n      delete newCartCourses[data.course][data.section];\n\n      if (Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    } else {\n      delete newCartCourses[data.course];\n    }\n\n    this.setState({\n      cartCourses: newCartCourses\n    });\n  }\n\n  getCartData() {\n    let cartData = [];\n\n    for (const courseKey of Object.keys(this.state.cartCourses)) {\n      let course = this.state.allCourses.find(x => {\n        return x.number === courseKey;\n      });\n      cartData.push(course);\n    }\n\n    return cartData;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"link\", {\n      rel: \"stylesheet\",\n      href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\",\n      integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\",\n      crossOrigin: \"anonymous\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Tabs, {\n      defaultActiveKey: \"search\",\n      style: {\n        position: 'fixed',\n        zIndex: 1,\n        width: '100%',\n        backgroundColor: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"search\",\n      title: \"Search\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      setCourses: courses => this.setCourses(courses),\n      courses: this.state.allCourses,\n      subjects: this.state.subjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '20vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: this.state.filteredCourses,\n      addCartCourse: data => this.addCartCourse(data),\n      removeCartCourse: data => this.removeCartCourse(data),\n      cartCourses: this.state.cartCourses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"cart\",\n      title: \"Cart\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '20vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: this.getCartData(),\n      addCartCourse: data => this.addCartCourse(data),\n      removeCartCourse: data => this.removeCartCourse(data),\n      cartCourses: this.state.cartCourses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"coursesCompleted\",\n      title: \"Courses Completed\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CompletedCourses, {\n      data: this.state.completedList,\n      rateCourse: course => this.rateCourse(course),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/kunlunwang/Downloads/test/src/App.js"],"names":["React","Sidebar","CourseArea","Tabs","Tab","CompletedCourses","App","Component","constructor","props","state","allCourses","filteredCourses","subjects","completedList","ratedCourses","cartCourses","componentDidMount","courseURL","courseData","fetch","json","setState","getSubjects","completedCoursesURL","completedCoursesData","getCompletedCourseList","loadInitialState","preCourses","preList","data","completeList","key","course","Object","entries","indexOf","push","i","length","subject","setCourses","courses","rateCourse","tempList","rating","filter","tempCourse","addCartCourse","newCartCourses","JSON","parse","stringify","courseIndex","findIndex","x","number","section","subsection","sections","subsections","c","removeCartCourse","splice","keys","getCartData","cartData","courseKey","find","render","position","zIndex","width","backgroundColor","paddingTop","marginLeft"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport CompletedCourses from './CompletedCourses';\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: [],\n      filteredCourses: [],\n      subjects: [],\n      completedList: [],\n      ratedCourses: [],\n      cartCourses: {}\n    };\n  }\n\n\n\n  async componentDidMount() {\n\n    let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    let courseData = await (await fetch(courseURL)).json()\n\n    this.setState({allCourses: courseData, filteredCourses: courseData, subjects: this.getSubjects(courseData)});\n\n\n    const completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n    const completedCoursesData = await (await fetch(completedCoursesURL)).json()\n\n    this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n\n    \n   // this.loadInitialState();\n   //this.loadPreCourse();\n  }\n\n  async loadInitialState(){\n    // let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    // let courseData = await (await fetch(courseURL)).json()\n\n    // this.setState({allCourses: courseData, filteredCourses: courseData, subjects: this.getSubjects(courseData)});\n\n\n    // let completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n    // let completedCoursesData = await (await fetch(completedCoursesURL)).json()\n\n    // this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n\n\n  }\n\n  // async loadPreCourse () {\n  //   let completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n  //   let completedCoursesData = await (await fetch(completedCoursesURL)).json()\n\n  //   this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n  // }\n\n  getCompletedCourseList(preCourses){\n    let preList = preCourses.data;\n    let completeList = [];\n    for(const [key, course] of Object.entries(this.state.allCourses)) {\n      \n      if(preList.indexOf(key) !== -1){\n        // course.rating = false;\n        completeList.push([key, course]);\n      }\n    }\n    return completeList;\n  }\n\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for(let i = 0; i < data.length; i++) {\n      if(subjects.indexOf(data[i].subject) === -1)\n        subjects.push(data[i].subject);\n    }\n\n    return subjects;\n  }\n  \n  setCourses(courses) {\n    this.setState({filteredCourses: courses})\n  }\n\n\n  rateCourse(course){\n    var tempList = this.state.ratedCourses;\n    course[1].rating = course[1].rating?false:true;\n    if(course[1].rating){\n      tempList.push(course);\n    }\n    else{\n      tempList = tempList.filter((tempCourse)=>{\n        if(tempCourse[0] === course[0]){\n          return 0;\n        }\n        else{\n          return 1;\n        }\n      });\n    }\n    this.setState({ratedCourses: tempList})\n  }\n\n\n\n\n\n  addCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses))// I think this is a hack to deepcopy\n    let courseIndex = this.state.allCourses.findIndex((x) => {return x.number===data.course})\n    if (courseIndex === -1)\n    {\n      return \n    }\n\n    if('subsection' in data) {\n      if(data.course in this.state.cartCourses) {\n        if(data.section in this.state.cartCourses[data.course]) {\n          newCartCourses[data.course][data.section].push(data.subsection);\n        }\n        else {\n          newCartCourses[data.course][data.section] = [];\n          newCartCourses[data.course][data.section].push(data.subsection);\n        }\n      }\n      else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n        newCartCourses[data.course][data.section].push(data.subsection);\n      }\n    }\n    else if('section' in data) {\n      if(data.course in this.state.cartCourses) {\n        newCartCourses[data.course][data.section] = [];\n\n        for(let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) {\n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      \n      \n      }\n      else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n        for(let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) { \n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      }\n    }\n    else {\n      newCartCourses[data.course] = {};\n\n\n      for (let i = 0; i < this.state.allCourses[courseIndex].sections.length; i++){\n        newCartCourses[data.course][i] = [];\n\n         for(let c= 0; c < this.state.allCourses[courseIndex].sections[i].subsections.length; c ++){\n          newCartCourses[data.course][i].push(this.state.allCourses[courseIndex].sections[i].subsections[c]);\n        }\n\n      }\n\n\n    }\n    this.setState({cartCourses: newCartCourses});\n  }\n\n  removeCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses))\n\n    if('subsection' in data) {\n      newCartCourses[data.course][data.section].splice(newCartCourses[data.course][data.section].indexOf(data.subsection), 1);\n      if(newCartCourses[data.course][data.section].length === 0) {\n        delete newCartCourses[data.course][data.section];\n      }\n      if(Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    }\n    else if('section' in data) {\n      delete newCartCourses[data.course][data.section];\n      if(Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    }\n    else {\n      delete newCartCourses[data.course];\n    }\n    this.setState({cartCourses: newCartCourses});\n  }\n\n  getCartData() {\n    let cartData = [];\n\n    for(const courseKey of Object.keys(this.state.cartCourses)) {\n      let course = this.state.allCourses.find((x) => {return x.number === courseKey})\n\n      cartData.push(course);\n    }\n    return cartData;\n  }\n\n  render() {\n\n    return (\n      <>\n        <link\n          rel=\"stylesheet\"\n          href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\n          integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\"\n          crossOrigin=\"anonymous\"\n        />\n\n        <Tabs defaultActiveKey=\"search\" style={{position: 'fixed', zIndex: 1, width: '100%', backgroundColor: 'white'}}>\n\n\n          <Tab eventKey=\"search\" title=\"Search\" style={{paddingTop: '5vh'}}>\n            <Sidebar setCourses={(courses) => this.setCourses(courses)} courses={this.state.allCourses} subjects={this.state.subjects}/>\n            <div style={{marginLeft: '20vw'}}>\n              <CourseArea data={this.state.filteredCourses} addCartCourse={(data) => this.addCartCourse(data)} removeCartCourse={(data) => this.removeCartCourse(data)} cartCourses={this.state.cartCourses}/>\n            </div>\n          </Tab>\n\n\n          <Tab eventKey=\"cart\" title=\"Cart\" style={{paddingTop: '5vh'}}>\n            <div style={{marginLeft: '20vw'}}>\n              <CourseArea data={this.getCartData()} addCartCourse={(data) => this.addCartCourse(data)} removeCartCourse={(data) => this.removeCartCourse(data)} cartCourses={this.state.cartCourses}/>\n            </div>\n          </Tab>\n\n\n          <Tab eventKey=\"coursesCompleted\" title=\"Courses Completed\">\n            <CompletedCourses data={this.state.completedList} rateCourse={(course)=>this.rateCourse(course)}/>\n          </Tab>\n\n\n        </Tabs>\n      </>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}