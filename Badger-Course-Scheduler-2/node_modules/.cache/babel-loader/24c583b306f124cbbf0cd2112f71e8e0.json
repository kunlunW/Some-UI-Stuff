{"ast":null,"code":"var _jsxFileName = \"/Users/kunlunwang/Downloads/test/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport CompletedCourses from './CompletedCourses';\nimport Recommender from './Recommender';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: {},\n      filteredCourses: [],\n      subjects: [],\n      completedList: [],\n      ratedCourses: [],\n      cartCourses: [],\n      enrolledCourses: {},\n      interestList: [],\n      finish: []\n    };\n  }\n\n  async componentDidMount() {\n    // let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    // let courseData = await (await fetch(courseURL)).json()\n    // this.setState({allCourses: courseData, filteredCourses: courseData, subjects: this.getSubjects(courseData)});\n    await fetch(\"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\").then(res => res.json()).then(data => this.setState({\n      allCourses: data,\n      filteredCourses: data,\n      subjects: this.getSubjects(data)\n    }));\n    fetch('http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed ').then(res => res.json()).then(data => {\n      let key = data['data'];\n      let all = this.state.allCourses;\n      let taken = this.state.finish;\n\n      for (let i = 0; i < key.length; i++) {\n        taken.push(all[key[i]]);\n      }\n\n      this.setState({\n        finish: taken\n      });\n    }); // data => this.setState ({completedList: this.getCompletedCourseList(data)})\n    // const completedCoursesURL = await fetch(\"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed \") ; \n    // const completedCoursesData = await completedCoursesURL.json()\n    // this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)});\n  }\n\n  async loadInitialState() {// let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    // let courseData = await (await fetch(courseURL)).json()\n    // this.setState({allCourses: courseData, filteredCourses: courseData, subjects: this.getSubjects(courseData)});\n    // let completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n    // let completedCoursesData = await (await fetch(completedCoursesURL)).json()\n    // this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n  }\n\n  getEnrolledCourses(data) {\n    let courses = {};\n    let names = [];\n\n    for (const course of Object.values(data)) {\n      for (const c of Object.values(course)) {\n        names.push(c);\n      }\n    } //console.log(names);\n\n\n    for (let course of Object.keys(this.state.allCourses)) {\n      for (let j = 0; j < names.length; j++) {\n        if (course === names[j]) {\n          courses[course] = this.state.allCourses[course];\n          courses[course].rating = 1; //console.log(courses[course]);\n        }\n      }\n    } //console.log(courses);\n\n\n    return courses;\n  } // async loadPreCourse () {\n  //   let completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n  //   let completedCoursesData = await (await fetch(completedCoursesURL)).json()\n  //   this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n  // }\n\n\n  getCompletedCourseList(preCourses) {\n    let preList = preCourses.data;\n    let completeList = [];\n\n    for (const [key, course] of Object.entries(this.state.allCourses)) {\n      if (preList.indexOf(key) !== -1) {\n        course.rating = false;\n        completeList.push([key, course]);\n      }\n    }\n\n    return completeList;\n  }\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for (let i = 0; i < data.length; i++) {\n      if (subjects.indexOf(data[i].subject) === -1) subjects.push(data[i].subject);\n    }\n\n    return subjects;\n  }\n\n  setCourses(courses) {\n    this.setState({\n      filteredCourses: courses\n    });\n  }\n\n  rateCourse(course) {\n    var tempList = this.state.ratedCourses;\n    course[1].rating = course[1].rating ? false : true;\n\n    if (course[1].rating) {\n      tempList.push(course);\n    } else {\n      tempList = tempList.filter(tempCourse => {\n        if (tempCourse[0] === course[0]) {\n          return 0;\n        } else {\n          return 1;\n        }\n      });\n    }\n\n    this.setState({\n      ratedCourses: tempList\n    });\n  }\n\n  addCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses)); // I think this is a hack to deepcopy\n\n    let courseIndex = this.state.allCourses.findIndex(x => {\n      return x.number === data.course;\n    });\n\n    if (courseIndex === -1) {\n      return;\n    }\n\n    if ('subsection' in data) {\n      if (data.course in this.state.cartCourses) {\n        if (data.section in this.state.cartCourses[data.course]) {\n          newCartCourses[data.course][data.section].push(data.subsection);\n        } else {\n          newCartCourses[data.course][data.section] = [];\n          newCartCourses[data.course][data.section].push(data.subsection);\n        }\n      } else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n        newCartCourses[data.course][data.section].push(data.subsection);\n      }\n    } else if ('section' in data) {\n      if (data.course in this.state.cartCourses) {\n        newCartCourses[data.course][data.section] = [];\n\n        for (let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) {\n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      } else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n\n        for (let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) {\n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      }\n    } else {\n      newCartCourses[data.course] = {};\n\n      for (let i = 0; i < this.state.allCourses[courseIndex].sections.length; i++) {\n        newCartCourses[data.course][i] = [];\n\n        for (let c = 0; c < this.state.allCourses[courseIndex].sections[i].subsections.length; c++) {\n          newCartCourses[data.course][i].push(this.state.allCourses[courseIndex].sections[i].subsections[c]);\n        }\n      }\n    }\n\n    this.setState({\n      cartCourses: newCartCourses\n    });\n  }\n\n  removeCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses));\n\n    if ('subsection' in data) {\n      newCartCourses[data.course][data.section].splice(newCartCourses[data.course][data.section].indexOf(data.subsection), 1);\n\n      if (newCartCourses[data.course][data.section].length === 0) {\n        delete newCartCourses[data.course][data.section];\n      }\n\n      if (Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    } else if ('section' in data) {\n      delete newCartCourses[data.course][data.section];\n\n      if (Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    } else {\n      delete newCartCourses[data.course];\n    }\n\n    this.setState({\n      cartCourses: newCartCourses\n    });\n  }\n\n  getCartData() {\n    let cartData = [];\n\n    for (const courseKey of Object.keys(this.state.cartCourses)) {\n      let course = this.state.allCourses.find(x => {\n        return x.number === courseKey;\n      });\n      cartData.push(course);\n    }\n\n    return cartData;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"link\", {\n      rel: \"stylesheet\",\n      href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\",\n      integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\",\n      crossOrigin: \"anonymous\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Tabs, {\n      defaultActiveKey: \"search\",\n      style: {\n        position: 'fixed',\n        zIndex: 1,\n        width: '100%',\n        backgroundColor: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"search\",\n      title: \"Search\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      setCourses: courses => this.setCourses(courses),\n      courses: this.state.allCourses,\n      subjects: this.state.subjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '20vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: this.state.filteredCourses,\n      addCartCourse: data => this.addCartCourse(data),\n      removeCartCourse: data => this.removeCartCourse(data),\n      cartCourses: this.state.cartCourses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"cart\",\n      title: \"Cart\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '20vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: this.getCartData(),\n      addCartCourse: data => this.addCartCourse(data),\n      removeCartCourse: data => this.removeCartCourse(data),\n      cartCourses: this.state.cartCourses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"coursesCompleted\",\n      title: \"Courses Completed\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CompletedCourses, {\n      data: this.state.finish,\n      rateCourse: course => this.rateCourse(course),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"recommender\",\n      title: \"Recommender\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Recommender, {\n      aCourses: this.state.allCourses,\n      iList: this.state.interestList,\n      sList: this.state.subjects,\n      rCourses: this.state.ratedCourses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/kunlunwang/Downloads/test/src/App.js"],"names":["React","Sidebar","CourseArea","Tabs","Tab","CompletedCourses","Recommender","App","Component","constructor","props","state","allCourses","filteredCourses","subjects","completedList","ratedCourses","cartCourses","enrolledCourses","interestList","finish","componentDidMount","fetch","then","res","json","data","setState","getSubjects","key","all","taken","i","length","push","loadInitialState","getEnrolledCourses","courses","names","course","Object","values","c","keys","j","rating","getCompletedCourseList","preCourses","preList","completeList","entries","indexOf","subject","setCourses","rateCourse","tempList","filter","tempCourse","addCartCourse","newCartCourses","JSON","parse","stringify","courseIndex","findIndex","x","number","section","subsection","sections","subsections","removeCartCourse","splice","getCartData","cartData","courseKey","find","render","position","zIndex","width","backgroundColor","paddingTop","marginLeft"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,OAAOC,WAAP,MAAwB,eAAxB;;AAGA,MAAMC,GAAN,SAAkBP,KAAK,CAACQ,SAAxB,CAAkC;AAChCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAE,EADD;AAEXC,MAAAA,eAAe,EAAE,EAFN;AAGXC,MAAAA,QAAQ,EAAE,EAHC;AAIXC,MAAAA,aAAa,EAAE,EAJJ;AAKXC,MAAAA,YAAY,EAAE,EALH;AAMXC,MAAAA,WAAW,EAAE,EANF;AAQXC,MAAAA,eAAe,EAAE,EARN;AASXC,MAAAA,YAAY,EAAE,EATH;AAWXC,MAAAA,MAAM,EAAE;AAXG,KAAb;AAaD;;AAID,QAAMC,iBAAN,GAA0B;AAExB;AACA;AAEA;AAEA,UAAMC,KAAK,CAAC,uDAAD,CAAL,CAA+DC,IAA/D,CACJC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADH,EAEJF,IAFI,CAECG,IAAI,IAAI,KAAKC,QAAL,CAAc;AAACf,MAAAA,UAAU,EAAEc,IAAb;AAAmBb,MAAAA,eAAe,EAAEa,IAApC;AAA0CZ,MAAAA,QAAQ,EAAE,KAAKc,WAAL,CAAiBF,IAAjB;AAApD,KAAd,CAFT,CAAN;AAIAJ,IAAAA,KAAK,CAAC,sFAAD,CAAL,CAA8FC,IAA9F,CACEC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADT,EAEEF,IAFF,CAEOG,IAAI,IAAI;AACb,UAAIG,GAAG,GAACH,IAAI,CAAC,MAAD,CAAZ;AACA,UAAII,GAAG,GAAE,KAAKnB,KAAL,CAAWC,UAApB;AACA,UAAImB,KAAK,GAAC,KAAKpB,KAAL,CAAWS,MAArB;;AAEA,WAAK,IAAIY,CAAC,GAAC,CAAX,EAAaA,CAAC,GAACH,GAAG,CAACI,MAAnB,EAA0BD,CAAC,EAA3B,EAA+B;AAC7BD,QAAAA,KAAK,CAACG,IAAN,CAAWJ,GAAG,CAACD,GAAG,CAACG,CAAD,CAAJ,CAAd;AACD;;AAED,WAAKL,QAAL,CAAc;AAACP,QAAAA,MAAM,EAACW;AAAR,OAAd;AAED,KAbD,EAXwB,CA4BxB;AAGA;AACA;AAEA;AAID;;AAED,QAAMI,gBAAN,GAAwB,CACtB;AACA;AAEA;AAGA;AACA;AAEA;AAGD;;AAGDC,EAAAA,kBAAkB,CAACV,IAAD,EAAO;AACvB,QAAIW,OAAO,GAAG,EAAd;AACA,QAAIC,KAAK,GAAG,EAAZ;;AAEA,SAAI,MAAMC,MAAV,IAAoBC,MAAM,CAACC,MAAP,CAAcf,IAAd,CAApB,EAAyC;AACvC,WAAI,MAAMgB,CAAV,IAAeF,MAAM,CAACC,MAAP,CAAcF,MAAd,CAAf,EAAqC;AACnCD,QAAAA,KAAK,CAACJ,IAAN,CAAWQ,CAAX;AACD;AACF,KARsB,CASvB;;;AAEA,SAAI,IAAIH,MAAR,IAAkBC,MAAM,CAACG,IAAP,CAAY,KAAKhC,KAAL,CAAWC,UAAvB,CAAlB,EAAsD;AACpD,WAAI,IAAIgC,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACN,KAAK,CAACL,MAArB,EAA6BW,CAAC,EAA9B,EAAkC;AAChC,YAAGL,MAAM,KAAKD,KAAK,CAACM,CAAD,CAAnB,EAAwB;AACtBP,UAAAA,OAAO,CAACE,MAAD,CAAP,GAAkB,KAAK5B,KAAL,CAAWC,UAAX,CAAsB2B,MAAtB,CAAlB;AACAF,UAAAA,OAAO,CAACE,MAAD,CAAP,CAAgBM,MAAhB,GAAyB,CAAzB,CAFsB,CAGtB;AACD;AACF;AACF,KAnBsB,CAqBvB;;;AACA,WAAOR,OAAP;AACD,GAnG+B,CAsGhC;AACA;AACA;AAEA;AACA;;;AAEAS,EAAAA,sBAAsB,CAACC,UAAD,EAAY;AAChC,QAAIC,OAAO,GAAGD,UAAU,CAACrB,IAAzB;AACA,QAAIuB,YAAY,GAAG,EAAnB;;AACA,SAAI,MAAM,CAACpB,GAAD,EAAMU,MAAN,CAAV,IAA2BC,MAAM,CAACU,OAAP,CAAe,KAAKvC,KAAL,CAAWC,UAA1B,CAA3B,EAAkE;AAEhE,UAAGoC,OAAO,CAACG,OAAR,CAAgBtB,GAAhB,MAAyB,CAAC,CAA7B,EAA+B;AAC7BU,QAAAA,MAAM,CAACM,MAAP,GAAgB,KAAhB;AACAI,QAAAA,YAAY,CAACf,IAAb,CAAkB,CAACL,GAAD,EAAMU,MAAN,CAAlB;AACD;AACF;;AACD,WAAOU,YAAP;AACD;;AAGDrB,EAAAA,WAAW,CAACF,IAAD,EAAO;AAChB,QAAIZ,QAAQ,GAAG,EAAf;AACAA,IAAAA,QAAQ,CAACoB,IAAT,CAAc,KAAd;;AAEA,SAAI,IAAIF,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGN,IAAI,CAACO,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnC,UAAGlB,QAAQ,CAACqC,OAAT,CAAiBzB,IAAI,CAACM,CAAD,CAAJ,CAAQoB,OAAzB,MAAsC,CAAC,CAA1C,EACEtC,QAAQ,CAACoB,IAAT,CAAcR,IAAI,CAACM,CAAD,CAAJ,CAAQoB,OAAtB;AACH;;AAED,WAAOtC,QAAP;AACD;;AAEDuC,EAAAA,UAAU,CAAChB,OAAD,EAAU;AAClB,SAAKV,QAAL,CAAc;AAACd,MAAAA,eAAe,EAAEwB;AAAlB,KAAd;AACD;;AAGDiB,EAAAA,UAAU,CAACf,MAAD,EAAQ;AAChB,QAAIgB,QAAQ,GAAG,KAAK5C,KAAL,CAAWK,YAA1B;AACAuB,IAAAA,MAAM,CAAC,CAAD,CAAN,CAAUM,MAAV,GAAmBN,MAAM,CAAC,CAAD,CAAN,CAAUM,MAAV,GAAiB,KAAjB,GAAuB,IAA1C;;AACA,QAAGN,MAAM,CAAC,CAAD,CAAN,CAAUM,MAAb,EAAoB;AAClBU,MAAAA,QAAQ,CAACrB,IAAT,CAAcK,MAAd;AACD,KAFD,MAGI;AACFgB,MAAAA,QAAQ,GAAGA,QAAQ,CAACC,MAAT,CAAiBC,UAAD,IAAc;AACvC,YAAGA,UAAU,CAAC,CAAD,CAAV,KAAkBlB,MAAM,CAAC,CAAD,CAA3B,EAA+B;AAC7B,iBAAO,CAAP;AACD,SAFD,MAGI;AACF,iBAAO,CAAP;AACD;AACF,OAPU,CAAX;AAQD;;AACD,SAAKZ,QAAL,CAAc;AAACX,MAAAA,YAAY,EAAEuC;AAAf,KAAd;AACD;;AAMDG,EAAAA,aAAa,CAAChC,IAAD,EAAO;AAClB,QAAIiC,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,KAAKnD,KAAL,CAAWM,WAA1B,CAAX,CAArB,CADkB,CACqD;;AACvE,QAAI8C,WAAW,GAAG,KAAKpD,KAAL,CAAWC,UAAX,CAAsBoD,SAAtB,CAAiCC,CAAD,IAAO;AAAC,aAAOA,CAAC,CAACC,MAAF,KAAWxC,IAAI,CAACa,MAAvB;AAA8B,KAAtE,CAAlB;;AACA,QAAIwB,WAAW,KAAK,CAAC,CAArB,EACA;AACE;AACD;;AAED,QAAG,gBAAgBrC,IAAnB,EAAyB;AACvB,UAAGA,IAAI,CAACa,MAAL,IAAe,KAAK5B,KAAL,CAAWM,WAA7B,EAA0C;AACxC,YAAGS,IAAI,CAACyC,OAAL,IAAgB,KAAKxD,KAAL,CAAWM,WAAX,CAAuBS,IAAI,CAACa,MAA5B,CAAnB,EAAwD;AACtDoB,UAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,EAA0CjC,IAA1C,CAA+CR,IAAI,CAAC0C,UAApD;AACD,SAFD,MAGK;AACHT,UAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,IAA4C,EAA5C;AACAR,UAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,EAA0CjC,IAA1C,CAA+CR,IAAI,CAAC0C,UAApD;AACD;AACF,OARD,MASK;AACHT,QAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,GAA8B,EAA9B;AACAoB,QAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,IAA4C,EAA5C;AACAR,QAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,EAA0CjC,IAA1C,CAA+CR,IAAI,CAAC0C,UAApD;AACD;AACF,KAfD,MAgBK,IAAG,aAAa1C,IAAhB,EAAsB;AACzB,UAAGA,IAAI,CAACa,MAAL,IAAe,KAAK5B,KAAL,CAAWM,WAA7B,EAA0C;AACxC0C,QAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,IAA4C,EAA5C;;AAEA,aAAI,IAAInC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,KAAKrB,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4C3C,IAAI,CAACyC,OAAjD,EAA0DG,WAA1D,CAAsErC,MAAzF,EAAiGD,CAAC,EAAlG,EAAsG;AACpG2B,UAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,EAA0CjC,IAA1C,CAA+C,KAAKvB,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4C3C,IAAI,CAACyC,OAAjD,EAA0DG,WAA1D,CAAsEtC,CAAtE,CAA/C;AACD;AAGF,OARD,MASK;AACH2B,QAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,GAA8B,EAA9B;AACAoB,QAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,IAA4C,EAA5C;;AACA,aAAI,IAAInC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,KAAKrB,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4C3C,IAAI,CAACyC,OAAjD,EAA0DG,WAA1D,CAAsErC,MAAzF,EAAiGD,CAAC,EAAlG,EAAsG;AACpG2B,UAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,EAA0CjC,IAA1C,CAA+C,KAAKvB,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4C3C,IAAI,CAACyC,OAAjD,EAA0DG,WAA1D,CAAsEtC,CAAtE,CAA/C;AACD;AACF;AACF,KAjBI,MAkBA;AACH2B,MAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,GAA8B,EAA9B;;AAGA,WAAK,IAAIP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrB,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4CpC,MAAhE,EAAwED,CAAC,EAAzE,EAA4E;AAC1E2B,QAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4BP,CAA5B,IAAiC,EAAjC;;AAEC,aAAI,IAAIU,CAAC,GAAE,CAAX,EAAcA,CAAC,GAAG,KAAK/B,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4CrC,CAA5C,EAA+CsC,WAA/C,CAA2DrC,MAA7E,EAAqFS,CAAC,EAAtF,EAA0F;AACzFiB,UAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4BP,CAA5B,EAA+BE,IAA/B,CAAoC,KAAKvB,KAAL,CAAWC,UAAX,CAAsBmD,WAAtB,EAAmCM,QAAnC,CAA4CrC,CAA5C,EAA+CsC,WAA/C,CAA2D5B,CAA3D,CAApC;AACD;AAEF;AAGF;;AACD,SAAKf,QAAL,CAAc;AAACV,MAAAA,WAAW,EAAE0C;AAAd,KAAd;AACD;;AAEDY,EAAAA,gBAAgB,CAAC7C,IAAD,EAAO;AACrB,QAAIiC,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,KAAKnD,KAAL,CAAWM,WAA1B,CAAX,CAArB;;AAEA,QAAG,gBAAgBS,IAAnB,EAAyB;AACvBiC,MAAAA,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,EAA0CK,MAA1C,CAAiDb,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,EAA0ChB,OAA1C,CAAkDzB,IAAI,CAAC0C,UAAvD,CAAjD,EAAqH,CAArH;;AACA,UAAGT,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,EAA0ClC,MAA1C,KAAqD,CAAxD,EAA2D;AACzD,eAAO0B,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,CAAP;AACD;;AACD,UAAG3B,MAAM,CAACG,IAAP,CAAYgB,cAAc,CAACjC,IAAI,CAACa,MAAN,CAA1B,EAAyCN,MAAzC,KAAoD,CAAvD,EAA0D;AACxD,eAAO0B,cAAc,CAACjC,IAAI,CAACa,MAAN,CAArB;AACD;AACF,KARD,MASK,IAAG,aAAab,IAAhB,EAAsB;AACzB,aAAOiC,cAAc,CAACjC,IAAI,CAACa,MAAN,CAAd,CAA4Bb,IAAI,CAACyC,OAAjC,CAAP;;AACA,UAAG3B,MAAM,CAACG,IAAP,CAAYgB,cAAc,CAACjC,IAAI,CAACa,MAAN,CAA1B,EAAyCN,MAAzC,KAAoD,CAAvD,EAA0D;AACxD,eAAO0B,cAAc,CAACjC,IAAI,CAACa,MAAN,CAArB;AACD;AACF,KALI,MAMA;AACH,aAAOoB,cAAc,CAACjC,IAAI,CAACa,MAAN,CAArB;AACD;;AACD,SAAKZ,QAAL,CAAc;AAACV,MAAAA,WAAW,EAAE0C;AAAd,KAAd;AACD;;AAEDc,EAAAA,WAAW,GAAG;AACZ,QAAIC,QAAQ,GAAG,EAAf;;AAEA,SAAI,MAAMC,SAAV,IAAuBnC,MAAM,CAACG,IAAP,CAAY,KAAKhC,KAAL,CAAWM,WAAvB,CAAvB,EAA4D;AAC1D,UAAIsB,MAAM,GAAG,KAAK5B,KAAL,CAAWC,UAAX,CAAsBgE,IAAtB,CAA4BX,CAAD,IAAO;AAAC,eAAOA,CAAC,CAACC,MAAF,KAAaS,SAApB;AAA8B,OAAjE,CAAb;AAEAD,MAAAA,QAAQ,CAACxC,IAAT,CAAcK,MAAd;AACD;;AACD,WAAOmC,QAAP;AACD;;AAEDG,EAAAA,MAAM,GAAG;AAEP,wBACE,uDACE;AACE,MAAA,GAAG,EAAC,YADN;AAEE,MAAA,IAAI,EAAC,uEAFP;AAGE,MAAA,SAAS,EAAC,yEAHZ;AAIE,MAAA,WAAW,EAAC,WAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE,oBAAC,IAAD;AAAM,MAAA,gBAAgB,EAAC,QAAvB;AAAgC,MAAA,KAAK,EAAE;AAACC,QAAAA,QAAQ,EAAE,OAAX;AAAoBC,QAAAA,MAAM,EAAE,CAA5B;AAA+BC,QAAAA,KAAK,EAAE,MAAtC;AAA8CC,QAAAA,eAAe,EAAE;AAA/D,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGE,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,QAAd;AAAuB,MAAA,KAAK,EAAC,QAA7B;AAAsC,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAE;AAAb,OAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,OAAD;AAAS,MAAA,UAAU,EAAG7C,OAAD,IAAa,KAAKgB,UAAL,CAAgBhB,OAAhB,CAAlC;AAA4D,MAAA,OAAO,EAAE,KAAK1B,KAAL,CAAWC,UAAhF;AAA4F,MAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWG,QAAjH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAK,MAAA,KAAK,EAAE;AAACqE,QAAAA,UAAU,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AAAY,MAAA,IAAI,EAAE,KAAKxE,KAAL,CAAWE,eAA7B;AAA8C,MAAA,aAAa,EAAGa,IAAD,IAAU,KAAKgC,aAAL,CAAmBhC,IAAnB,CAAvE;AAAiG,MAAA,gBAAgB,EAAGA,IAAD,IAAU,KAAK6C,gBAAL,CAAsB7C,IAAtB,CAA7H;AAA0J,MAAA,WAAW,EAAE,KAAKf,KAAL,CAAWM,WAAlL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAFF,CAHF,eAWE,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,MAAd;AAAqB,MAAA,KAAK,EAAC,MAA3B;AAAkC,MAAA,KAAK,EAAE;AAACiE,QAAAA,UAAU,EAAE;AAAb,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AAAY,MAAA,IAAI,EAAE,KAAKV,WAAL,EAAlB;AAAsC,MAAA,aAAa,EAAG/C,IAAD,IAAU,KAAKgC,aAAL,CAAmBhC,IAAnB,CAA/D;AAAyF,MAAA,gBAAgB,EAAGA,IAAD,IAAU,KAAK6C,gBAAL,CAAsB7C,IAAtB,CAArH;AAAkJ,MAAA,WAAW,EAAE,KAAKf,KAAL,CAAWM,WAA1K;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CAXF,eAkBE,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,kBAAd;AAAiC,MAAA,KAAK,EAAC,mBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,gBAAD;AAAkB,MAAA,IAAI,EAAE,KAAKN,KAAL,CAAWS,MAAnC;AAA2C,MAAA,UAAU,EAAGmB,MAAD,IAAU,KAAKe,UAAL,CAAgBf,MAAhB,CAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAlBF,eAsBE,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,aAAd;AAA4B,MAAA,KAAK,EAAC,aAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,WAAD;AAAa,MAAA,QAAQ,EAAE,KAAK5B,KAAL,CAAWC,UAAlC;AAA8C,MAAA,KAAK,EAAE,KAAKD,KAAL,CAAWQ,YAAhE;AAA8E,MAAA,KAAK,EAAE,KAAKR,KAAL,CAAWG,QAAhG;AAA0G,MAAA,QAAQ,EAAE,KAAKH,KAAL,CAAWK,YAA/H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAtBF,CARF,CADF;AAsCD;;AA1S+B;;AA6SlC,eAAeT,GAAf","sourcesContent":["import React from 'react';\nimport './App.css';\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport CompletedCourses from './CompletedCourses';\nimport Recommender from './Recommender';\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: {},\n      filteredCourses: [],\n      subjects: [],\n      completedList: [],\n      ratedCourses: [],\n      cartCourses: [],\n\n      enrolledCourses: {},\n      interestList: [],\n\n      finish: []\n    };\n  }\n\n\n\n  async componentDidMount() {\n\n    // let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    // let courseData = await (await fetch(courseURL)).json()\n\n    // this.setState({allCourses: courseData, filteredCourses: courseData, subjects: this.getSubjects(courseData)});\n\n    await fetch(\"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\").then (\n      res => res.json()\n    ).then(data => this.setState({allCourses: data, filteredCourses: data, subjects: this.getSubjects(data)}))\n    \n    fetch('http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed ').then(\n      res => res.json()\n    ).then(data => {\n      let key=data['data'];\n      let all =this.state.allCourses;\n      let taken=this.state.finish;\n\n      for (let i=0;i<key.length;i++) {\n        taken.push(all[key[i]])\n      }\n\n      this.setState({finish:taken})\n\n    });\n    \n    \n\n    // data => this.setState ({completedList: this.getCompletedCourseList(data)})\n\n\n    // const completedCoursesURL = await fetch(\"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed \") ; \n    // const completedCoursesData = await completedCoursesURL.json()\n\n    // this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)});\n\n    \n\n  }\n\n  async loadInitialState(){\n    // let courseURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/classes\";\n    // let courseData = await (await fetch(courseURL)).json()\n\n    // this.setState({allCourses: courseData, filteredCourses: courseData, subjects: this.getSubjects(courseData)});\n\n\n    // let completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n    // let completedCoursesData = await (await fetch(completedCoursesURL)).json()\n\n    // this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n\n\n  }\n\n\n  getEnrolledCourses(data) {\n    let courses = {};\n    let names = [];\n\n    for(const course of Object.values(data)) {\n      for(const c of Object.values(course)){\n        names.push(c);\n      }\n    }\n    //console.log(names);\n\n    for(let course of Object.keys(this.state.allCourses)) {\n      for(let j=0; j<names.length; j++) {\n        if(course === names[j]) {\n          courses[course] = this.state.allCourses[course];\n          courses[course].rating = 1;\n          //console.log(courses[course]);\n        }\n      }\n    }\n    \n    //console.log(courses);\n    return courses;\n  }\n\n\n  // async loadPreCourse () {\n  //   let completedCoursesURL = \"http://mysqlcs639.cs.wisc.edu:53706/api/react/students/5022025924/classes/completed\" ; \n  //   let completedCoursesData = await (await fetch(completedCoursesURL)).json()\n\n  //   this.setState ({completedList: this.getCompletedCourseList(completedCoursesData)})\n  // }\n\n  getCompletedCourseList(preCourses){\n    let preList = preCourses.data;\n    let completeList = [];\n    for(const [key, course] of Object.entries(this.state.allCourses)) {\n      \n      if(preList.indexOf(key) !== -1){\n        course.rating = false;\n        completeList.push([key, course]);\n      }\n    }\n    return completeList;\n  }\n\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for(let i = 0; i < data.length; i++) {\n      if(subjects.indexOf(data[i].subject) === -1)\n        subjects.push(data[i].subject);\n    }\n\n    return subjects;\n  }\n  \n  setCourses(courses) {\n    this.setState({filteredCourses: courses})\n  }\n\n\n  rateCourse(course){\n    var tempList = this.state.ratedCourses;\n    course[1].rating = course[1].rating?false:true;\n    if(course[1].rating){\n      tempList.push(course);\n    }\n    else{\n      tempList = tempList.filter((tempCourse)=>{\n        if(tempCourse[0] === course[0]){\n          return 0;\n        }\n        else{\n          return 1;\n        }\n      });\n    }\n    this.setState({ratedCourses: tempList})\n  }\n\n\n\n\n\n  addCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses))// I think this is a hack to deepcopy\n    let courseIndex = this.state.allCourses.findIndex((x) => {return x.number===data.course})\n    if (courseIndex === -1)\n    {\n      return \n    }\n\n    if('subsection' in data) {\n      if(data.course in this.state.cartCourses) {\n        if(data.section in this.state.cartCourses[data.course]) {\n          newCartCourses[data.course][data.section].push(data.subsection);\n        }\n        else {\n          newCartCourses[data.course][data.section] = [];\n          newCartCourses[data.course][data.section].push(data.subsection);\n        }\n      }\n      else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n        newCartCourses[data.course][data.section].push(data.subsection);\n      }\n    }\n    else if('section' in data) {\n      if(data.course in this.state.cartCourses) {\n        newCartCourses[data.course][data.section] = [];\n\n        for(let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) {\n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      \n      \n      }\n      else {\n        newCartCourses[data.course] = {};\n        newCartCourses[data.course][data.section] = [];\n        for(let i = 0; i < this.state.allCourses[courseIndex].sections[data.section].subsections.length; i++) { \n          newCartCourses[data.course][data.section].push(this.state.allCourses[courseIndex].sections[data.section].subsections[i]);\n        }\n      }\n    }\n    else {\n      newCartCourses[data.course] = {};\n\n\n      for (let i = 0; i < this.state.allCourses[courseIndex].sections.length; i++){\n        newCartCourses[data.course][i] = [];\n\n         for(let c= 0; c < this.state.allCourses[courseIndex].sections[i].subsections.length; c ++){\n          newCartCourses[data.course][i].push(this.state.allCourses[courseIndex].sections[i].subsections[c]);\n        }\n\n      }\n\n\n    }\n    this.setState({cartCourses: newCartCourses});\n  }\n\n  removeCartCourse(data) {\n    let newCartCourses = JSON.parse(JSON.stringify(this.state.cartCourses))\n\n    if('subsection' in data) {\n      newCartCourses[data.course][data.section].splice(newCartCourses[data.course][data.section].indexOf(data.subsection), 1);\n      if(newCartCourses[data.course][data.section].length === 0) {\n        delete newCartCourses[data.course][data.section];\n      }\n      if(Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    }\n    else if('section' in data) {\n      delete newCartCourses[data.course][data.section];\n      if(Object.keys(newCartCourses[data.course]).length === 0) {\n        delete newCartCourses[data.course];\n      }\n    }\n    else {\n      delete newCartCourses[data.course];\n    }\n    this.setState({cartCourses: newCartCourses});\n  }\n\n  getCartData() {\n    let cartData = [];\n\n    for(const courseKey of Object.keys(this.state.cartCourses)) {\n      let course = this.state.allCourses.find((x) => {return x.number === courseKey})\n\n      cartData.push(course);\n    }\n    return cartData;\n  }\n\n  render() {\n\n    return (\n      <>\n        <link\n          rel=\"stylesheet\"\n          href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\n          integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\"\n          crossOrigin=\"anonymous\"\n        />\n\n        <Tabs defaultActiveKey=\"search\" style={{position: 'fixed', zIndex: 1, width: '100%', backgroundColor: 'white'}}>\n\n\n          <Tab eventKey=\"search\" title=\"Search\" style={{paddingTop: '5vh'}}>\n            <Sidebar setCourses={(courses) => this.setCourses(courses)} courses={this.state.allCourses} subjects={this.state.subjects}/>\n            <div style={{marginLeft: '20vw'}}>\n              <CourseArea data={this.state.filteredCourses} addCartCourse={(data) => this.addCartCourse(data)} removeCartCourse={(data) => this.removeCartCourse(data)} cartCourses={this.state.cartCourses}/>\n            </div>\n          </Tab>\n\n\n          <Tab eventKey=\"cart\" title=\"Cart\" style={{paddingTop: '5vh'}}>\n            <div style={{marginLeft: '20vw'}}>\n              <CourseArea data={this.getCartData()} addCartCourse={(data) => this.addCartCourse(data)} removeCartCourse={(data) => this.removeCartCourse(data)} cartCourses={this.state.cartCourses}/>\n            </div>\n          </Tab>\n\n\n          <Tab eventKey=\"coursesCompleted\" title=\"Courses Completed\">\n            <CompletedCourses data={this.state.finish} rateCourse={(course)=>this.rateCourse(course)}/>\n          </Tab>\n\n          <Tab eventKey=\"recommender\" title=\"Recommender\">\n            <Recommender aCourses={this.state.allCourses} iList={this.state.interestList} sList={this.state.subjects} rCourses={this.state.ratedCourses}/>\n          </Tab>\n\n        </Tabs>\n      </>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}